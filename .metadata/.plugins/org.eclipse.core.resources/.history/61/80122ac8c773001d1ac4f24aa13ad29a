package Parsing;

import java.util.ArrayList;
import java.util.List;

public class Model_Parser {

	public List<Element> getClocks(List<Element> model){
		return getElements(model, "KEY_VAR", "KEY_VAR_DECL_CLOCKS");
	}
	
	public List<Element> getParameters(List<Element> model){
		return getElements(model, "KEY_VAR_DECL_CLOCKS", "KEY_VAR_PARAMETERS");
	}
	
	public List<Element> getElements(List<Element> tokens, String begin, String end){
		List<Element> elems = new ArrayList<>();
		boolean fetch = false;
		for (Element e : tokens) {
			if (e.getType() == begin) {
				fetch = true;
			}
			if (fetch && e.getType() == "KEY_VAR_NAME") {
				elems.add(e);
			}
			if(e.getType() == end) {
				break;
			}
		}
		return elems;
	}
	
	public List<List<Element>> getAutomata(List<Element> model){
		List<List<Element>> automata = new ArrayList<>();
		boolean fetch = false;
		List<Element> automaton = new ArrayList<>();
		for (Element e : model) {
			if (e.getType() == "KEY_AUTOMATON") {
				fetch = true;
			}
			if (e.getType() == "KEY_END") {
				automata.add(automaton);
				fetch = false;
			}
			if (fetch) {
				automaton.add(e);
			}
		}
		return automata;
	}
	
	public List<Element> getActions(List<Element> automaton)
	
	public List<Element> getLocations(List<Element> tokens){
		List<Element> locations = new ArrayList<>();
		boolean declared = false;
		for (Element e : tokens) {
			if (e.getType() == "KEY_LOCATION") {
				declared = true;
			}
			if (declared) {
				if (e.getType() == "KEY_VAR_NAME") {
					locations.add(e);
				}
				else {
					declared = false;
				}
			}
		}
		return locations;
	}
	
}
